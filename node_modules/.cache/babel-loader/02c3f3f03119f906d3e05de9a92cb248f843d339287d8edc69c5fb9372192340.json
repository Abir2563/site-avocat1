{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import Navbar from\"../navbar/navbar\";import\"./profil.css\";// Import CSS file\nimport AppointmentDetails from\"./appoint\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditProfile=()=>{const[userData,setUserData]=useState({firstName:\"\",lastName:\"\",email:\"email inavailable for change\",// Replace with the user's actual email\npassword:\"\",newPassword:\"\",confirmPassword:\"\"});const[successMessage,setSuccessMessage]=useState(\"\");// State variable for success message\nconst[errorMessage,setErrorMessage]=useState(\"\");// State variable for error message\nconst token=localStorage.getItem(\"token\");// Get token from local storage\nconst handleChange=e=>{const{name,value}=e.target;setUserData({...userData,[name]:value});};const updateName=async()=>{try{await axios.put(\"http://localhost:8080/api/auth/update\",{firstName:userData.firstName,lastName:userData.lastName},{headers:{Authorization:`Bearer ${token}`// Include token in headers\n}});setSuccessMessage(\"Name updated successfully\");// Set success message\n}catch(error){setErrorMessage(error.response.data.message);// Set error message from backend response\nconsole.error(\"Error updating name:\",error);}};const updatePassword=async()=>{try{const{password,newPassword,confirmPassword}=userData;await axios.put(\"http://localhost:8080/api/auth/p\",{password,newPassword,confirmPassword},{headers:{Authorization:`Bearer ${token}`// Include token in headers\n}});setSuccessMessage(\"Password updated successfully\");// Set success message\n}catch(error){setErrorMessage(error.response.data.message);// Set error message from backend response\nconsole.error(\"Error updating password:\",error);}};const handleSubmit=async e=>{e.preventDefault();let errors=[];// Initialize array to store errors\ntry{// Update name\nif(userData.firstName||userData.lastName){await updateName();}// Update password\nif(userData.password||userData.newPassword||userData.confirmPassword){await updatePassword();}}catch(error){errors.push(error.response.data.message);// Add error message from response to array\n}if(errors.length>0){setErrorMessage(errors.join(\"\\n\"));// Set error message\n// Optionally, you can set errors to state for display\n}else{// If no errors, redirect to /profile\nwindow.location.href=\"/profile\";}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Profile\"}),successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:successMessage}),errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"First Name:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"text\",name:\"firstName\",value:userData.firstName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Last Name:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"text\",name:\"lastName\",value:userData.lastName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"email\",value:userData.email,readOnly:true// Make the email field read-only\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"password\",name:\"password\",value:userData.password,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"New Password:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"password\",name:\"newPassword\",value:userData.newPassword,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Confirm New Password:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"password\",name:\"confirmPassword\",value:userData.confirmPassword,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"Save Changes\"})]})]}),/*#__PURE__*/_jsx(AppointmentDetails,{})]});};export default EditProfile;","map":{"version":3,"names":["React","useState","axios","Navbar","AppointmentDetails","jsx","_jsx","jsxs","_jsxs","EditProfile","userData","setUserData","firstName","lastName","email","password","newPassword","confirmPassword","successMessage","setSuccessMessage","errorMessage","setErrorMessage","token","localStorage","getItem","handleChange","e","name","value","target","updateName","put","headers","Authorization","error","response","data","message","console","updatePassword","handleSubmit","preventDefault","errors","push","length","join","window","location","href","children","className","onSubmit","type","onChange","readOnly"],"sources":["C:/Users/RanimSaidi/Desktop/Muntuinfo/Site-Avoccat/siteavocat-dev/src/components/profil/editprofil.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport Navbar from \"../navbar/navbar\";\nimport \"./profil.css\"; // Import CSS file\nimport AppointmentDetails from \"./appoint\";\n\nconst EditProfile = () => {\n  const [userData, setUserData] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    email: \"email inavailable for change\", // Replace with the user's actual email\n    password: \"\",\n    newPassword: \"\",\n    confirmPassword: \"\",\n  });\n  const [successMessage, setSuccessMessage] = useState(\"\"); // State variable for success message\n  const [errorMessage, setErrorMessage] = useState(\"\"); // State variable for error message\n\n  const token = localStorage.getItem(\"token\"); // Get token from local storage\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setUserData({ ...userData, [name]: value });\n  };\n\n  const updateName = async () => {\n    try {\n      await axios.put(\n        \"http://localhost:8080/api/auth/update\",\n        {\n          firstName: userData.firstName,\n          lastName: userData.lastName,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`, // Include token in headers\n          },\n        }\n      );\n      setSuccessMessage(\"Name updated successfully\"); // Set success message\n    } catch (error) {\n      setErrorMessage(error.response.data.message); // Set error message from backend response\n      console.error(\"Error updating name:\", error);\n    }\n  };\n\n  const updatePassword = async () => {\n    try {\n      const { password, newPassword, confirmPassword } = userData;\n      await axios.put(\n        \"http://localhost:8080/api/auth/p\",\n        {\n          password,\n          newPassword,\n          confirmPassword,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`, // Include token in headers\n          },\n        }\n      );\n      setSuccessMessage(\"Password updated successfully\"); // Set success message\n    } catch (error) {\n      setErrorMessage(error.response.data.message); // Set error message from backend response\n      console.error(\"Error updating password:\", error);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    let errors = []; // Initialize array to store errors\n\n    try {\n      // Update name\n      if (userData.firstName || userData.lastName) {\n        await updateName();\n      }\n      // Update password\n      if (\n        userData.password ||\n        userData.newPassword ||\n        userData.confirmPassword\n      ) {\n        await updatePassword();\n      }\n    } catch (error) {\n      errors.push(error.response.data.message); // Add error message from response to array\n    }\n    if (errors.length > 0) {\n      setErrorMessage(errors.join(\"\\n\")); // Set error message\n      // Optionally, you can set errors to state for display\n    } else {\n      // If no errors, redirect to /profile\n      window.location.href = \"/profile\";\n    }\n  };\n  return (\n    <div>\n      <Navbar />\n      <div className=\"user-profile-container\">\n        <h2>User Profile</h2>\n        {/* Display success message if exists */}\n        {successMessage && (\n          <div className=\"success-message\">{successMessage}</div>\n        )}\n        {/* Display error message if exists */}\n        {errorMessage && <div className=\"error-message\">{errorMessage}</div>}\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label className=\"form-label\">First Name:</label>\n            <input\n              className=\"form-input\"\n              type=\"text\"\n              name=\"firstName\"\n              value={userData.firstName}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-group\">\n            <label className=\"form-label\">Last Name:</label>\n            <input\n              className=\"form-input\"\n              type=\"text\"\n              name=\"lastName\"\n              value={userData.lastName}\n              onChange={handleChange}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"form-label\">Email:</label>\n            <input\n              className=\"form-input\"\n              type=\"email\"\n              value={userData.email}\n              readOnly // Make the email field read-only\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"form-label\">Password:</label>\n            <input\n              className=\"form-input\"\n              type=\"password\"\n              name=\"password\"\n              value={userData.password}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-group\">\n            <label className=\"form-label\">New Password:</label>\n            <input\n              className=\"form-input\"\n              type=\"password\"\n              name=\"newPassword\"\n              value={userData.newPassword}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-group\">\n            <label className=\"form-label\">Confirm New Password:</label>\n            <input\n              className=\"form-input\"\n              type=\"password\"\n              name=\"confirmPassword\"\n              value={userData.confirmPassword}\n              onChange={handleChange}\n            />\n          </div>\n          <button type=\"submit\" className=\"submit-button\">\n            Save Changes\n          </button>\n        </form>\n      </div>\n      <AppointmentDetails />\n    </div>\n  );\n};\n\nexport default EditProfile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}