{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{Link}from'react-router-dom';import'./AppPoint.css';import NavAdmin from'../Navadmin';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AppPoint(){const[appointments,setAppointments]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{// Get token from localStorage\nconst token=localStorage.getItem(\"token\");// Check if token is missing\nif(!token){console.error(\"Token is missing\");// Return some error message or handle the absence of token as per your requirement\nsetError(\"Token is missing\");setLoading(false);return;}// Set authorization header with token\nconst config={headers:{Authorization:`Bearer ${token}`}};const fetchAppointments=async()=>{try{const response=await axios.get('http://localhost:8080/api/appointment/',config);setAppointments(response.data);}catch(err){setError(\"Erreur lors de la récupération des rendez-vous: \"+err.message);}finally{setLoading(false);}};fetchAppointments();},[]);const handleDelete=id=>{const confirmDelete=window.confirm(\"Souhaitez-vous supprimer ce rendez-vous ?\");if(confirmDelete){// Add token to delete request headers\nconst token=localStorage.getItem(\"token\");const config={headers:{Authorization:`Bearer ${token}`}};axios.delete(`http://localhost:8080/api/appointment/${id}`,config).then(()=>{setAppointments(prevAppointments=>prevAppointments.filter(appointment=>appointment._id!==id));}).catch(err=>{console.error(\"Erreur lors de la suppression du rendez-vous:\",err);setError(\"Erreur lors de la suppression du rendez-vous.\");});}};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Chargement...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{children:error});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavAdmin,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-bk\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Appointment List\"}),/*#__PURE__*/_jsx(\"div\",{className:\"user-table\",children:appointments.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No Appointment Found\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"table-u\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Full Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Contact Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Proposed Service\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Chosen Service\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"About\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Documents\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Arrival Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Consultation\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status Message\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:appointments.map((appointment,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:appointment.fullName}),/*#__PURE__*/_jsx(\"td\",{children:appointment.email}),/*#__PURE__*/_jsx(\"td\",{children:appointment.contactNumber}),/*#__PURE__*/_jsx(\"td\",{children:appointment.serviceOffered}),/*#__PURE__*/_jsx(\"td\",{children:appointment.chosenService}),/*#__PURE__*/_jsx(\"td\",{children:appointment.appointmentCategory}),/*#__PURE__*/_jsx(\"td\",{children:appointment.aboutAppointment}),/*#__PURE__*/_jsx(\"td\",{children:appointment.documents}),/*#__PURE__*/_jsx(\"td\",{children:new Date(appointment.appointmentDetails.date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:appointment.appointmentDetails.time}),/*#__PURE__*/_jsx(\"td\",{children:appointment.appointmentDetails.location}),/*#__PURE__*/_jsx(\"td\",{children:appointment.appointmentDetails.timeToReach}),/*#__PURE__*/_jsx(\"td\",{children:appointment.consultation}),/*#__PURE__*/_jsx(\"td\",{children:appointment.status}),/*#__PURE__*/_jsx(\"td\",{children:appointment.statusMessage}),/*#__PURE__*/_jsxs(\"td\",{className:\"option-l-m-s\",children:[/*#__PURE__*/_jsx(Link,{to:`/reada/${appointment._id}`,children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-lire\",children:\"Read\"})}),/*#__PURE__*/_jsx(Link,{to:`/updatea/${appointment._id}`,children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-modifier\",children:\"Edit\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(appointment._id),className:\"btn-supprimer\",children:\"Delete\"})]})]},appointment._id))})]})})]})]});}export default AppPoint;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","NavAdmin","jsx","_jsx","jsxs","_jsxs","AppPoint","appointments","setAppointments","loading","setLoading","error","setError","token","localStorage","getItem","console","config","headers","Authorization","fetchAppointments","response","get","data","err","message","handleDelete","id","confirmDelete","window","confirm","delete","then","prevAppointments","filter","appointment","_id","catch","children","className","length","map","index","fullName","email","contactNumber","serviceOffered","chosenService","appointmentCategory","aboutAppointment","documents","Date","appointmentDetails","date","toLocaleDateString","time","location","timeToReach","consultation","status","statusMessage","to","onClick"],"sources":["C:/Users/RanimSaidi/Desktop/Muntuinfo/Site-Avoccat/siteavocat-dev/src/components/admin/admin/appointments/AppPoint.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport './AppPoint.css';\nimport NavAdmin from '../Navadmin';\n\nfunction AppPoint() {\n    const [appointments, setAppointments] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        // Get token from localStorage\n        const token = localStorage.getItem(\"token\");\n\n        // Check if token is missing\n        if (!token) {\n            console.error(\"Token is missing\");\n            // Return some error message or handle the absence of token as per your requirement\n            setError(\"Token is missing\");\n            setLoading(false);\n            return;\n        }\n\n        // Set authorization header with token\n        const config = {\n            headers: {\n                Authorization: `Bearer ${token}`,\n            },\n        };\n\n        const fetchAppointments = async () => {\n            try {\n                const response = await axios.get('http://localhost:8080/api/appointment/', config);\n                setAppointments(response.data);\n            } catch (err) {\n                setError(\"Erreur lors de la récupération des rendez-vous: \" + err.message);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchAppointments();\n    }, []);\n\n    const handleDelete = (id) => {\n        const confirmDelete = window.confirm(\"Souhaitez-vous supprimer ce rendez-vous ?\");\n        if (confirmDelete) {\n            // Add token to delete request headers\n            const token = localStorage.getItem(\"token\");\n            const config = {\n                headers: {\n                    Authorization: `Bearer ${token}`,\n                },\n            };\n\n            axios\n                .delete(`http://localhost:8080/api/appointment/${id}`, config)\n                .then(() => {\n                    setAppointments((prevAppointments) => prevAppointments.filter((appointment) => appointment._id !== id));\n                })\n                .catch((err) => {\n                    console.error(\"Erreur lors de la suppression du rendez-vous:\", err);\n                    setError(\"Erreur lors de la suppression du rendez-vous.\");\n                });\n        }\n    };\n\n    if (loading) {\n        return <div>Chargement...</div>;\n    }\n\n    if (error) {\n        return <div>{error}</div>;\n    }\n\n    return (\n        <div>\n            <NavAdmin />\n            <div className=\"user-bk\">\n                <h1>Appointment List</h1>\n                <div className=\"user-table\">\n                    {appointments.length === 0 ? (\n                        <p>No Appointment Found</p>\n                    ) : (\n                        <table className=\"table-u\">\n                            <thead>\n                                <tr>\n                                    <th>#</th>\n                                    <th>Full Name</th>\n                                    <th>Email</th>\n                                    <th>Contact Number</th>\n                                    <th>Proposed Service</th>\n                                    <th>Chosen Service</th>\n                                    <th>Category</th>\n                                    <th>About</th>\n                                    <th>Documents</th>\n                                    <th>Date</th>\n                                    <th>Time</th>\n                                    <th>Location</th>\n                                    <th>Arrival Time</th>\n                                    <th>Consultation</th>\n                                    <th>Status</th>\n                                    <th>Status Message</th>\n                                    <th>Action</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {appointments.map((appointment, index) => (\n                                    <tr key={appointment._id}>\n                                        <td>{index + 1}</td>\n                                        <td>{appointment.fullName}</td>\n                                        <td>{appointment.email}</td>\n                                        <td>{appointment.contactNumber}</td>\n                                        <td>{appointment.serviceOffered}</td>\n                                        <td>{appointment.chosenService}</td>\n                                        <td>{appointment.appointmentCategory}</td>\n                                        <td>{appointment.aboutAppointment}</td>\n                                        <td>{appointment.documents}</td>\n                                        <td>{new Date(appointment.appointmentDetails.date).toLocaleDateString()}</td>\n                                        <td>{appointment.appointmentDetails.time}</td>\n                                        <td>{appointment.appointmentDetails.location}</td>\n                                        <td>{appointment.appointmentDetails.timeToReach}</td>\n                                        <td>{appointment.consultation}</td>\n                                        <td>{appointment.status}</td>\n                                        <td>{appointment.statusMessage}</td>\n                                        <td className=\"option-l-m-s\">\n                                            <Link to={`/reada/${appointment._id}`}>\n                                                <button className=\"btn-lire\">Read</button>\n                                            </Link>\n                                            <Link to={`/updatea/${appointment._id}`}>\n                                                <button className=\"btn-modifier\">Edit</button>\n                                            </Link>\n                                            <button onClick={() => handleDelete(appointment._id)} className=\"btn-supprimer\">\n                                                Delete\n                                            </button>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default AppPoint;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}