{"ast":null,"code":"import React,{useState}from\"react\";import\"./reset.css\";import{ThemeProvider,createTheme}from\"@mui/material/styles\";import TextField from\"@mui/material/TextField\";import{useNavigate,useParams}from\"react-router-dom\";// Import useParams\nimport axios from\"axios\";import Navbar from\"../navbar/navbar\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const darkTheme=createTheme({palette:{mode:\"dark\"}});function ResetPassword(){const[newPassword,setNewPassword]=useState(\"\");const[confirmNewPassword,setConfirmNewPassword]=useState(\"\");const[error,setError]=useState(\"\");const[submitMessage,setSubmitMessage]=useState(\"\");const navigate=useNavigate();const{userId}=useParams();// Access userId from params\nconst handleNewPasswordChange=e=>{setNewPassword(e.target.value);};const handleConfirmNewPasswordChange=e=>{setConfirmNewPassword(e.target.value);};const handleSubmit=async event=>{event.preventDefault();setSubmitMessage(\"Processing your request...\");try{const url=`http://localhost:8080/api/auth/reset-password/${userId}`;// Include userId in the URL\nconst{data:res}=await axios.post(url,{newPassword,newPasswordConfirmation:confirmNewPassword});setSubmitMessage(res.message);setTimeout(()=>navigate(\"/login\"),5000);// Redirect to login after a short message\n}catch(error){if(error.response&&error.response.status>=400&&error.response.status<=500){setError(error.response.data.error);}else{setError(\"An unexpected error occurred. Please try again later.\");}setSubmitMessage(\"\");// Clear processing message on error\n}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"forme\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"S\",children:\"Reset Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"formGroup0\",children:/*#__PURE__*/_jsx(ThemeProvider,{theme:darkTheme,children:/*#__PURE__*/_jsx(TextField,{type:\"password\",label:\"New Password\",variant:\"standard\",fullWidth:true,value:newPassword,onChange:handleNewPasswordChange,required:true,className:\"input\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"formGroup0\",children:/*#__PURE__*/_jsx(ThemeProvider,{theme:darkTheme,children:/*#__PURE__*/_jsx(TextField,{type:\"password\",label:\"Confirm New Password\",variant:\"standard\",fullWidth:true,value:confirmNewPassword,onChange:handleConfirmNewPasswordChange,required:true,className:\"input\"})})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error_msg\",children:error}),submitMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"submitMessage\",children:submitMessage}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"loginButton\",children:\"Reset Password\"})]})})]});}export default ResetPassword;","map":{"version":3,"names":["React","useState","ThemeProvider","createTheme","TextField","useNavigate","useParams","axios","Navbar","jsx","_jsx","jsxs","_jsxs","darkTheme","palette","mode","ResetPassword","newPassword","setNewPassword","confirmNewPassword","setConfirmNewPassword","error","setError","submitMessage","setSubmitMessage","navigate","userId","handleNewPasswordChange","e","target","value","handleConfirmNewPasswordChange","handleSubmit","event","preventDefault","url","data","res","post","newPasswordConfirmation","message","setTimeout","response","status","children","className","onSubmit","theme","type","label","variant","fullWidth","onChange","required"],"sources":["C:/Users/RanimSaidi/Desktop/Muntuinfo/Site-Avoccat/siteavocat-dev/src/components/reset/reset.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"./reset.css\";\nimport { ThemeProvider, createTheme } from \"@mui/material/styles\";\nimport TextField from \"@mui/material/TextField\";\nimport { useNavigate, useParams } from \"react-router-dom\"; // Import useParams\nimport axios from \"axios\";\nimport Navbar from \"../navbar/navbar\";\n\nconst darkTheme = createTheme({\n  palette: {\n    mode: \"dark\",\n  },\n});\n\nfunction ResetPassword() {\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmNewPassword, setConfirmNewPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [submitMessage, setSubmitMessage] = useState(\"\");\n  const navigate = useNavigate();\n  const { userId } = useParams(); // Access userId from params\n\n  const handleNewPasswordChange = (e) => {\n    setNewPassword(e.target.value);\n  };\n\n  const handleConfirmNewPasswordChange = (e) => {\n    setConfirmNewPassword(e.target.value);\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    setSubmitMessage(\"Processing your request...\");\n\n    try {\n      const url = `http://localhost:8080/api/auth/reset-password/${userId}`; // Include userId in the URL\n      const { data: res } = await axios.post(url, {\n        newPassword,\n        newPasswordConfirmation: confirmNewPassword,\n      });\n      setSubmitMessage(res.message);\n      setTimeout(() => navigate(\"/login\"), 5000); // Redirect to login after a short message\n    } catch (error) {\n      if (\n        error.response &&\n        error.response.status >= 400 &&\n        error.response.status <= 500\n      ) {\n        setError(error.response.data.error);\n      } else {\n        setError(\"An unexpected error occurred. Please try again later.\");\n      }\n      setSubmitMessage(\"\"); // Clear processing message on error\n    }\n  };\n\n  return (\n    <div>\n      <Navbar />\n      <div className=\"main-content\">\n        <form onSubmit={handleSubmit} className=\"forme\">\n          <div className=\"S\">Reset Password</div>\n          <div className=\"formGroup0\">\n            <ThemeProvider theme={darkTheme}>\n              <TextField\n                type=\"password\"\n                label=\"New Password\"\n                variant=\"standard\"\n                fullWidth\n                value={newPassword}\n                onChange={handleNewPasswordChange}\n                required\n                className=\"input\"\n              />\n            </ThemeProvider>\n          </div>\n          <div className=\"formGroup0\">\n            <ThemeProvider theme={darkTheme}>\n              <TextField\n                type=\"password\"\n                label=\"Confirm New Password\"\n                variant=\"standard\"\n                fullWidth\n                value={confirmNewPassword}\n                onChange={handleConfirmNewPasswordChange}\n                required\n                className=\"input\"\n              />\n            </ThemeProvider>\n          </div>\n          {error && <div className=\"error_msg\">{error}</div>}\n          {submitMessage && (\n            <div className=\"submitMessage\">{submitMessage}</div>\n          )}\n          <button type=\"submit\" className=\"loginButton\">\n            Reset Password\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default ResetPassword;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}