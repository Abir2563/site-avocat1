{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{Link,useNavigate}from'react-router-dom';import\"../liste.css\";import Navbar from'../../../navbar/navbar';import NavAdmin from'../Navadmin';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ConsultationListe=()=>{const[consultations,setConsultations]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchConsultations=async()=>{try{// Add token to request headers\nconst token=localStorage.getItem(\"token\");const config={headers:{Authorization:`Bearer ${token}`}};const response=await axios.get('http://localhost:8080/api/consult',config);// Fetch consultations endpoint\nsetConsultations(response.data);}catch(err){console.error(\"Error fetching consultations:\",err);setError(\"Connection error: \"+err.message);}finally{setLoading(false);}};fetchConsultations();},[]);const handleDelete=id=>{const confirmDelete=window.confirm(\"Do you want to delete this consultation?\");if(confirmDelete){// Add token to delete request headers\nconst token=localStorage.getItem(\"token\");const config={headers:{Authorization:`Bearer ${token}`}};axios.delete(`http://localhost:8080/api/consult/${id}`,config)// Delete consultation endpoint\n.then(res=>{console.log(\"Consultation deleted:\",res);setConsultations(consultations.filter(consultation=>consultation._id!==id));}).catch(err=>console.error(\"Error deleting consultation:\",err));}};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavAdmin,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-bk\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"List of Consultations\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-table\",children:[consultations.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No consultations found.\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"table-u\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Client Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:consultations.map(consultation=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:consultation.clientName}),/*#__PURE__*/_jsx(\"td\",{children:consultation.appointmentTime}),/*#__PURE__*/_jsx(\"td\",{children:new Date(consultation.appointmentDate).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:consultation.consultaiontype}),/*#__PURE__*/_jsx(\"td\",{children:consultation.status}),/*#__PURE__*/_jsx(\"td\",{className:\"option-l-m-s\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(consultation._id),className:\"btn-supprimer\",children:\"Delete\"})})]},consultation._id))})]}),/*#__PURE__*/_jsx(Link,{to:\"/appadmin\",className:\"btn-success\",children:\"Back\"})]})]})]});};export default ConsultationListe;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","useNavigate","Navbar","NavAdmin","jsx","_jsx","jsxs","_jsxs","ConsultationListe","consultations","setConsultations","loading","setLoading","error","setError","navigate","fetchConsultations","token","localStorage","getItem","config","headers","Authorization","response","get","data","err","console","message","handleDelete","id","confirmDelete","window","confirm","delete","then","res","log","filter","consultation","_id","catch","children","className","length","map","clientName","appointmentTime","Date","appointmentDate","toLocaleDateString","consultaiontype","status","onClick","to"],"sources":["C:/Users/RanimSaidi/Desktop/siteavocat-dev-Client/src/components/admin/admin/Consultation/constListe.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nimport \"../liste.css\";\nimport Navbar from '../../../navbar/navbar';\nimport NavAdmin from '../Navadmin';\n\nconst ConsultationListe = () => {\n    const [consultations, setConsultations] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchConsultations = async () => {\n            try {\n                // Add token to request headers\n                const token = localStorage.getItem(\"token\");\n                const config = {\n                    headers: {\n                        Authorization: `Bearer ${token}`,\n                    },\n                };\n                const response = await axios.get('http://localhost:8080/api/consult', config); // Fetch consultations endpoint\n                setConsultations(response.data);\n            } catch (err) {\n                console.error(\"Error fetching consultations:\", err);\n                setError(\"Connection error: \" + err.message);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchConsultations();\n    }, []);\n\n    const handleDelete = (id) => {\n        const confirmDelete = window.confirm(\"Do you want to delete this consultation?\");\n        if (confirmDelete) {\n            // Add token to delete request headers\n            const token = localStorage.getItem(\"token\");\n            const config = {\n                headers: {\n                    Authorization: `Bearer ${token}`,\n                },\n            };\n            axios.delete(`http://localhost:8080/api/consult/${id}`, config) // Delete consultation endpoint\n                .then(res => {\n                    console.log(\"Consultation deleted:\", res);\n                    setConsultations(consultations.filter(consultation => consultation._id !== id));\n                })\n                .catch(err => console.error(\"Error deleting consultation:\", err));\n        }\n    };\n\n    if (loading) {\n        return <div>Loading...</div>;\n    }\n\n    return (\n        <div>\n            <NavAdmin />\n            <div className=\"user-bk\">\n                <h1>List of Consultations</h1>\n                <div className=\"user-table\">\n                    {consultations.length === 0 ? (\n                        <p>No consultations found.</p>\n                    ) : (\n                        <table className=\"table-u\">\n                            <thead>\n                                <tr>\n                                    <th>Client Name</th>\n                                    <th>Time</th>\n                                    <th>Date</th>\n                                    <th>Type</th>\n                                    <th>Status</th>\n                                    <th>Action</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {consultations.map((consultation) => (\n                                    <tr key={consultation._id}>\n                                        <td>{consultation.clientName}</td>\n                                        <td>{consultation.appointmentTime}</td>\n                                        <td>{new Date(consultation.appointmentDate).toLocaleDateString()}</td>\n                                        <td>{consultation.consultaiontype}</td>\n                                        <td>{consultation.status}</td>\n                                        <td className=\"option-l-m-s\">\n                                            <button onClick={() => handleDelete(consultation._id)} className=\"btn-supprimer\">Delete</button>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    )}\n                    <Link to=\"/appadmin\" className=\"btn-success\">Back</Link>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ConsultationListe;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}