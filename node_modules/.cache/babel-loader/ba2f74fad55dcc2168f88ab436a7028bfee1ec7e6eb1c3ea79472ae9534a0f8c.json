{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import not from\"../../images/noti.png\";import\"./profil.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AppointmentDetails=()=>{const[appointment,setAppointment]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchAppointment=async()=>{try{const usrId=localStorage.getItem(\"uid\");if(!usrId){setError(\"User ID not found in local storage\");setLoading(false);return;}const token=localStorage.getItem(\"token\");if(!token){setError(\"Token not found in local storage\");setLoading(false);return;}const config={headers:{Authorization:`Bearer ${token}`}};const response=await axios.get(`http://localhost:8080/api/appointment/details/${usrId}`,config);if(!response.data){console.error(\"Invalid appointment data: Empty response\",response.data);setError(\"Invalid appointment data: Empty response\");setLoading(false);return;}if(!response.data.date||!response.data.time||!response.data.status){console.error(\"Invalid appointment data\",response.data);setError(\"Invalid appointment data\");setLoading(false);return;}const{date,time,status,statusMessage}=response.data;console.log(response.data);setAppointment({date,time,status,statusMessage});setLoading(false);localStorage.setItem(\"tId\",response.data.id);}catch(error){console.error(\"Error fetching appointment details\",error);setError(\"Error fetching appointment details\");setLoading(false);}};fetchAppointment();},[]);const handleDelete=async()=>{try{const token=localStorage.getItem(\"token\");if(!token){setError(\"Token not found in local storage\");return;}const Id=localStorage.getItem(\"tId\");console.log(\"Appointment ID:\",Id);if(!Id){setError(\"Appointment ID not found in local storage\");return;}const config={headers:{Authorization:`Bearer ${token}`}};const response=await axios.delete(`http://localhost:8080/api/appointment/user/${Id}`,config);console.log(\"Appointment deleted successfully\",response);alert(\"Appointment deleted successfully\");}catch(error){console.error(\"Error deleting appointment:\",error.response?error.response.data:error.message);alert(\"Error deleting appointment. Please try again.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"appcontainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"headerContainer\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Appointment Details\"}),/*#__PURE__*/_jsx(Link,{to:\"/reminder\",children:/*#__PURE__*/_jsx(\"img\",{src:not,alt:\"reminder\",className:\"profil\"})})]}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):appointment?/*#__PURE__*/_jsxs(\"div\",{className:\"appdatetime\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Date: \"}),appointment.date?new Date(appointment.date).toLocaleDateString():\"N/A\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Time:\"}),\" \",appointment.time]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Status:\"}),\" \",appointment.status]}),appointment.status===\"denied\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Message:\"}),appointment.statusMessage]}),appointment.status===\"confirmed\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Paiment:\"}),\" unvalid\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"op\",children:[/*#__PURE__*/_jsx(Link,{to:\"/EditAppointment\",children:/*#__PURE__*/_jsx(\"button\",{className:\"Folssa\",children:\"Edit\"})}),/*#__PURE__*/_jsx(Link,{to:\"/profile\",children:/*#__PURE__*/_jsx(\"button\",{className:\"Folssa\",onClick:handleDelete,children:\"Delete\"})})]})]}):/*#__PURE__*/_jsx(\"div\",{children:\"No appointment details available\"})]});};export default AppointmentDetails;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","not","jsx","_jsx","jsxs","_jsxs","AppointmentDetails","appointment","setAppointment","loading","setLoading","error","setError","fetchAppointment","usrId","localStorage","getItem","token","config","headers","Authorization","response","get","data","console","date","time","status","statusMessage","log","setItem","id","handleDelete","Id","delete","alert","message","className","children","to","src","alt","Date","toLocaleDateString","onClick"],"sources":["C:/siteavocat-dev/src/components/profil/appoint.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport not from \"../../images/noti.png\";\nimport \"./profil.css\";\n\nconst AppointmentDetails = () => {\n  const [appointment, setAppointment] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchAppointment = async () => {\n      try {\n        const usrId = localStorage.getItem(\"uid\");\n        if (!usrId) {\n          setError(\"User ID not found in local storage\");\n          setLoading(false);\n          return;\n        }\n\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          setError(\"Token not found in local storage\");\n          setLoading(false);\n          return;\n        }\n\n        const config = {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        };\n\n        const response = await axios.get(\n          `http://localhost:8080/api/appointment/details/${usrId}`,\n          config\n        );\n\n        if (!response.data) {\n          console.error(\n            \"Invalid appointment data: Empty response\",\n            response.data\n          );\n          setError(\"Invalid appointment data: Empty response\");\n          setLoading(false);\n          return;\n        }\n\n        if (\n          !response.data.date ||\n          !response.data.time ||\n          !response.data.status\n        ) {\n          console.error(\"Invalid appointment data\", response.data);\n          setError(\"Invalid appointment data\");\n          setLoading(false);\n          return;\n        }\n\n        const { date, time, status, statusMessage } = response.data;\n        console.log(response.data);\n        setAppointment({ date, time, status, statusMessage });\n        setLoading(false);\n\n        localStorage.setItem(\"tId\", response.data.id);\n      } catch (error) {\n        console.error(\"Error fetching appointment details\", error);\n        setError(\"Error fetching appointment details\");\n        setLoading(false);\n      }\n    };\n\n    fetchAppointment();\n  }, []);\n\n  const handleDelete = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        setError(\"Token not found in local storage\");\n        return;\n      }\n\n      const Id = localStorage.getItem(\"tId\");\n      console.log(\"Appointment ID:\", Id);\n      if (!Id) {\n        setError(\"Appointment ID not found in local storage\");\n        return;\n      }\n\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      };\n\n      const response = await axios.delete(\n        `http://localhost:8080/api/appointment/user/${Id}`,\n        config\n      );\n\n      console.log(\"Appointment deleted successfully\", response);\n      alert(\"Appointment deleted successfully\");\n    } catch (error) {\n      console.error(\n        \"Error deleting appointment:\",\n        error.response ? error.response.data : error.message\n      );\n      alert(\"Error deleting appointment. Please try again.\");\n    }\n  };\n\n  return (\n    <div className=\"appcontainer\">\n      <div className=\"headerContainer\">\n        <h2>Appointment Details</h2>\n\n        <Link to=\"/reminder\">\n          <img src={not} alt=\"reminder\" className=\"profil\" />\n        </Link>\n      </div>\n      {loading ? (\n        <div>Loading...</div>\n      ) : appointment ? (\n        <div className=\"appdatetime\">\n          <div>\n            <b>Date: </b>\n            {appointment.date\n              ? new Date(appointment.date).toLocaleDateString()\n              : \"N/A\"}\n          </div>\n          <div>\n            {\" \"}\n            <b>Time:</b> {appointment.time}\n          </div>\n          <div>\n            {\" \"}\n            <b>Status:</b> {appointment.status}\n          </div>\n          {appointment.status === \"denied\" && (\n            <div className=\"alert alert-danger\">\n              <b>Message:</b>\n              {appointment.statusMessage}\n            </div>\n          )}\n          {appointment.status === \"confirmed\" && (\n            <div className=\"alert alert-success\">\n              <b>Paiment:</b> unvalid\n            </div>\n          )}\n          <div className=\"op\">\n            <Link to=\"/EditAppointment\">\n              <button className=\"Folssa\">Edit</button>\n            </Link>\n\n            <Link to=\"/profile\">\n              <button className=\"Folssa\" onClick={handleDelete}>\n                Delete\n              </button>\n            </Link>\n          </div>\n        </div>\n      ) : (\n        <div>No appointment details available</div>\n      )}\n    </div>\n  );\n};\n\nexport default AppointmentDetails;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,GAAG,KAAM,uBAAuB,CACvC,MAAO,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtB,KAAM,CAAAC,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAe,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC,CACzC,GAAI,CAACF,KAAK,CAAE,CACVF,QAAQ,CAAC,oCAAoC,CAAC,CAC9CF,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,KAAM,CAAAO,KAAK,CAAGF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACC,KAAK,CAAE,CACVL,QAAQ,CAAC,kCAAkC,CAAC,CAC5CF,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,KAAM,CAAAQ,MAAM,CAAG,CACbC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUH,KAAK,EAChC,CACF,CAAC,CAED,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAtB,KAAK,CAACuB,GAAG,CAC9B,iDAAiDR,KAAK,EAAE,CACxDI,MACF,CAAC,CAED,GAAI,CAACG,QAAQ,CAACE,IAAI,CAAE,CAClBC,OAAO,CAACb,KAAK,CACX,0CAA0C,CAC1CU,QAAQ,CAACE,IACX,CAAC,CACDX,QAAQ,CAAC,0CAA0C,CAAC,CACpDF,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,GACE,CAACW,QAAQ,CAACE,IAAI,CAACE,IAAI,EACnB,CAACJ,QAAQ,CAACE,IAAI,CAACG,IAAI,EACnB,CAACL,QAAQ,CAACE,IAAI,CAACI,MAAM,CACrB,CACAH,OAAO,CAACb,KAAK,CAAC,0BAA0B,CAAEU,QAAQ,CAACE,IAAI,CAAC,CACxDX,QAAQ,CAAC,0BAA0B,CAAC,CACpCF,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,KAAM,CAAEe,IAAI,CAAEC,IAAI,CAAEC,MAAM,CAAEC,aAAc,CAAC,CAAGP,QAAQ,CAACE,IAAI,CAC3DC,OAAO,CAACK,GAAG,CAACR,QAAQ,CAACE,IAAI,CAAC,CAC1Bf,cAAc,CAAC,CAAEiB,IAAI,CAAEC,IAAI,CAAEC,MAAM,CAAEC,aAAc,CAAC,CAAC,CACrDlB,UAAU,CAAC,KAAK,CAAC,CAEjBK,YAAY,CAACe,OAAO,CAAC,KAAK,CAAET,QAAQ,CAACE,IAAI,CAACQ,EAAE,CAAC,CAC/C,CAAE,MAAOpB,KAAK,CAAE,CACda,OAAO,CAACb,KAAK,CAAC,oCAAoC,CAAEA,KAAK,CAAC,CAC1DC,QAAQ,CAAC,oCAAoC,CAAC,CAC9CF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDG,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAmB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAf,KAAK,CAAGF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACC,KAAK,CAAE,CACVL,QAAQ,CAAC,kCAAkC,CAAC,CAC5C,OACF,CAEA,KAAM,CAAAqB,EAAE,CAAGlB,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC,CACtCQ,OAAO,CAACK,GAAG,CAAC,iBAAiB,CAAEI,EAAE,CAAC,CAClC,GAAI,CAACA,EAAE,CAAE,CACPrB,QAAQ,CAAC,2CAA2C,CAAC,CACrD,OACF,CAEA,KAAM,CAAAM,MAAM,CAAG,CACbC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUH,KAAK,EAChC,CACF,CAAC,CAED,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAtB,KAAK,CAACmC,MAAM,CACjC,8CAA8CD,EAAE,EAAE,CAClDf,MACF,CAAC,CAEDM,OAAO,CAACK,GAAG,CAAC,kCAAkC,CAAER,QAAQ,CAAC,CACzDc,KAAK,CAAC,kCAAkC,CAAC,CAC3C,CAAE,MAAOxB,KAAK,CAAE,CACda,OAAO,CAACb,KAAK,CACX,6BAA6B,CAC7BA,KAAK,CAACU,QAAQ,CAAGV,KAAK,CAACU,QAAQ,CAACE,IAAI,CAAGZ,KAAK,CAACyB,OAC/C,CAAC,CACDD,KAAK,CAAC,+CAA+C,CAAC,CACxD,CACF,CAAC,CAED,mBACE9B,KAAA,QAAKgC,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjC,KAAA,QAAKgC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BnC,IAAA,OAAAmC,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAE5BnC,IAAA,CAACH,IAAI,EAACuC,EAAE,CAAC,WAAW,CAAAD,QAAA,cAClBnC,IAAA,QAAKqC,GAAG,CAAEvC,GAAI,CAACwC,GAAG,CAAC,UAAU,CAACJ,SAAS,CAAC,QAAQ,CAAE,CAAC,CAC/C,CAAC,EACJ,CAAC,CACL5B,OAAO,cACNN,IAAA,QAAAmC,QAAA,CAAK,YAAU,CAAK,CAAC,CACnB/B,WAAW,cACbF,KAAA,QAAKgC,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjC,KAAA,QAAAiC,QAAA,eACEnC,IAAA,MAAAmC,QAAA,CAAG,QAAM,CAAG,CAAC,CACZ/B,WAAW,CAACkB,IAAI,CACb,GAAI,CAAAiB,IAAI,CAACnC,WAAW,CAACkB,IAAI,CAAC,CAACkB,kBAAkB,CAAC,CAAC,CAC/C,KAAK,EACN,CAAC,cACNtC,KAAA,QAAAiC,QAAA,EACG,GAAG,cACJnC,IAAA,MAAAmC,QAAA,CAAG,OAAK,CAAG,CAAC,IAAC,CAAC/B,WAAW,CAACmB,IAAI,EAC3B,CAAC,cACNrB,KAAA,QAAAiC,QAAA,EACG,GAAG,cACJnC,IAAA,MAAAmC,QAAA,CAAG,SAAO,CAAG,CAAC,IAAC,CAAC/B,WAAW,CAACoB,MAAM,EAC/B,CAAC,CACLpB,WAAW,CAACoB,MAAM,GAAK,QAAQ,eAC9BtB,KAAA,QAAKgC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCnC,IAAA,MAAAmC,QAAA,CAAG,UAAQ,CAAG,CAAC,CACd/B,WAAW,CAACqB,aAAa,EACvB,CACN,CACArB,WAAW,CAACoB,MAAM,GAAK,WAAW,eACjCtB,KAAA,QAAKgC,SAAS,CAAC,qBAAqB,CAAAC,QAAA,eAClCnC,IAAA,MAAAmC,QAAA,CAAG,UAAQ,CAAG,CAAC,WACjB,EAAK,CACN,cACDjC,KAAA,QAAKgC,SAAS,CAAC,IAAI,CAAAC,QAAA,eACjBnC,IAAA,CAACH,IAAI,EAACuC,EAAE,CAAC,kBAAkB,CAAAD,QAAA,cACzBnC,IAAA,WAAQkC,SAAS,CAAC,QAAQ,CAAAC,QAAA,CAAC,MAAI,CAAQ,CAAC,CACpC,CAAC,cAEPnC,IAAA,CAACH,IAAI,EAACuC,EAAE,CAAC,UAAU,CAAAD,QAAA,cACjBnC,IAAA,WAAQkC,SAAS,CAAC,QAAQ,CAACO,OAAO,CAAEZ,YAAa,CAAAM,QAAA,CAAC,QAElD,CAAQ,CAAC,CACL,CAAC,EACJ,CAAC,EACH,CAAC,cAENnC,IAAA,QAAAmC,QAAA,CAAK,kCAAgC,CAAK,CAC3C,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAhC,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}