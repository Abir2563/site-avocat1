{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{Link}from'react-router-dom';import Navadmin from'../Navadmin';import'../liste.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AppUser(){const[users,setUsers]=useState([]);useEffect(()=>{// Get token from localStorage\nconst token=localStorage.getItem(\"token\");// Check if token is missing\nif(!token){console.error(\"Token is missing\");// Return or handle the absence of token as per your requirement\nreturn;}// Set authorization header with token\nconst config={headers:{Authorization:` Bearer ${token}`}};axios.get('http://localhost:8080/api/admin/',config).then(res=>{// Check if res.data.users is an array\nif(Array.isArray(res.data.users)){setUsers(res.data.users);}else{console.error(\"Received data.users is not an array:\",res.data.users);}}).catch(err=>console.error(\"Error fetching users:\",err));},[]);const handleDelete=id=>{const confirmDelete=window.confirm(\"Souhaitez-vous supprimer cet utilisateur ?\");if(confirmDelete){// Add token to delete request headers\nconst token=localStorage.getItem(\"token\");const config={headers:{Authorization:` Bearer ${token}`}};axios.delete(`http://localhost:8080/api/admin/${id}`,config).then(()=>{// Refresh the list of users after deletion\nsetUsers(users.filter(user=>user._id!==id));}).catch(err=>console.error(\"Error deleting user:\",err));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Navadmin,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-bk\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Users List\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-table\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end\",children:/*#__PURE__*/_jsx(Link,{to:\"/create\",className:\"btn btn-success\",children:\"Ajouter+\"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table-u \",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"FirstName\"}),/*#__PURE__*/_jsx(\"th\",{children:\"LastName\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsx(\"td\",{children:user.firstName}),/*#__PURE__*/_jsx(\"td\",{children:user.lastName}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.role}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"option-l-m-s\",children:[/*#__PURE__*/_jsx(Link,{to:`/users/${user._id}`,children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-lire\",children:\"Read\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(user._id),className:\"btn-supprimer\",children:\"Delete\"})]})})]},user._id))})]})]})]})]});}export default AppUser;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","Navadmin","jsx","_jsx","jsxs","_jsxs","AppUser","users","setUsers","token","localStorage","getItem","console","error","config","headers","Authorization","get","then","res","Array","isArray","data","catch","err","handleDelete","id","confirmDelete","window","confirm","delete","filter","user","_id","children","className","to","map","firstName","lastName","email","role","onClick"],"sources":["C:/Users/RanimSaidi/Desktop/Muntuinfo/Site-Avoccat/siteavocat-dev/src/components/admin/admin/user/AppUser.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport Navadmin from '../Navadmin';\nimport '../liste.css';\n\nfunction AppUser() {\n    const [users, setUsers] = useState([]);\n\n    useEffect(() => {\n        // Get token from localStorage\n        const token = localStorage.getItem(\"token\");\n    \n        // Check if token is missing\n        if (!token) {\n            console.error(\"Token is missing\");\n            // Return or handle the absence of token as per your requirement\n            return;\n        }\n    \n        // Set authorization header with token\n        const config = {\n            headers: {\n                Authorization:` Bearer ${token}`,\n            },\n        };\n    \n        axios.get('http://localhost:8080/api/admin/', config)\n        .then(res => {\n            // Check if res.data.users is an array\n            if (Array.isArray(res.data.users)) {\n                setUsers(res.data.users);\n            } else {\n                console.error(\"Received data.users is not an array:\", res.data.users);\n            }\n        })\n        .catch(err => console.error(\"Error fetching users:\", err));\n    \n    }, []);\n    \n    const handleDelete = (id) => {\n        const confirmDelete = window.confirm(\"Souhaitez-vous supprimer cet utilisateur ?\");\n        if (confirmDelete) {\n            // Add token to delete request headers\n            const token = localStorage.getItem(\"token\");\n            const config = {\n                headers: {\n                    Authorization:` Bearer ${token}`,\n                },\n            };\n\n            axios.delete(`http://localhost:8080/api/admin/${id}`, config)\n                .then(() => {\n                    // Refresh the list of users after deletion\n                    setUsers(users.filter(user => user._id !== id));\n                })\n                .catch(err => console.error(\"Error deleting user:\", err));\n        }\n    };\n\n    return (\n        <div>\n        <div>\n        <Navadmin />\n        </div>\n        <div className='user-bk'>\n            <h1 >Users List</h1>\n            <div className='user-table'>\n                <div className='d-flex justify-content-end'>\n                    <Link to=\"/create\" className='btn btn-success'>Ajouter+</Link>\n                </div>\n                <table className='table-u '>\n                    <thead>\n                        <tr>\n                            <th>ID</th>\n                            <th>FirstName</th>\n                            <th>LastName</th>\n                            <th>Email</th>\n                            <th>Role</th>\n                            <th>Action</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n    {users.map((user) => (\n        <tr key={user._id} >\n            <td>{user._id}</td>\n            <td>{user.firstName}</td>\n            <td>{user.lastName}</td>\n            <td>{user.email}</td>\n            <td>{user.role}</td>\n            <td>\n          \n                <div className='option-l-m-s'>\n                <Link to={`/users/${user._id}`}>\n                    <button className='btn-lire'>Read</button>\n                </Link>\n                <button onClick={() => handleDelete(user._id)} className='btn-supprimer'>Delete</button>\n                </div>\n            </td>\n        </tr>\n    ))}\n</tbody>\n\n                </table>\n            </div>\n        </div>\n        </div>\n    );\n}\n\nexport default AppUser"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}