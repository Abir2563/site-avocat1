{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./profil.css\";// Import CSS file\nimport UserProfileView from\"./seeProfil\";import Navbar from\"../navbar/navbar\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditAppointment=()=>{const[appointment,setAppointment]=useState({date:\"\",time:\"\"});const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[newDate,setNewDate]=useState(\"\");const[newTime,setNewTime]=useState(\"\");useEffect(()=>{const fetchAppointment=async()=>{try{const usrId=localStorage.getItem(\"uid\");if(!usrId){setError(\"User ID not found in local storage\");setLoading(false);return;}const token=localStorage.getItem(\"token\");if(!token){setError(\"Token not found in local storage\");setLoading(false);return;}const config={headers:{Authorization:`Bearer ${token}`}};const response=await axios.get(`http://localhost:8080/api/appointment/details/${usrId}`,config);if(!response.data){console.error(\"Invalid appointment data: Empty response\",response.data);setError(\"Invalid appointment data: Empty response\");setLoading(false);return;}if(!response.data.date||!response.data.time||!response.data.status){console.error(\"Invalid appointment data\",response.data);setError(\"Invalid appointment data\");setLoading(false);return;}const{date,time,status,statusMessage}=response.data;console.log(response.data);setAppointment({date,time,status,statusMessage});setLoading(false);localStorage.setItem(\"tId\",response.data.id);}catch(error){console.error(\"Error fetching appointment details\",error);setError(\"Error fetching appointment details\");setLoading(false);}};fetchAppointment();},[]);const handleDateChange=e=>{setNewDate(e.target.value);};const handleTimeChange=e=>{setNewTime(e.target.value);};const handleSave=async()=>{try{const appointmentId=localStorage.getItem(\"appointmentId\");const token=localStorage.getItem(\"token\");const config={headers:{Authorization:`Bearer ${token}`}};await axios.put(`http://localhost:8080/api/appointment/update/${appointmentId}`,{date:newDate,time:newTime},config);window.location.href=\"/profile\";}catch(error){console.error(\"Error updating appointment:\",error);alert(\"Error updating appointment. Please try again.\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(UserProfileView,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"appcontainer\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Appointment\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):error?/*#__PURE__*/_jsx(\"p\",{children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newDate,onChange:handleDateChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Time:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"string\",value:newTime,onChange:handleTimeChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"editbutton\",onClick:handleSave,children:\"Save Changes\"})})]})]})]});};export default EditAppointment;","map":{"version":3,"names":["React","useState","useEffect","axios","UserProfileView","Navbar","jsx","_jsx","jsxs","_jsxs","EditAppointment","appointment","setAppointment","date","time","loading","setLoading","error","setError","newDate","setNewDate","newTime","setNewTime","fetchAppointment","usrId","localStorage","getItem","token","config","headers","Authorization","response","get","data","console","status","statusMessage","log","setItem","id","handleDateChange","e","target","value","handleTimeChange","handleSave","appointmentId","put","window","location","href","alert","children","className","type","onChange","onClick"],"sources":["C:/siteavocat-dev/src/components/profil/editappoint.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./profil.css\"; // Import CSS file\nimport UserProfileView from \"./seeProfil\";\nimport Navbar from \"../navbar/navbar\";\n\nconst EditAppointment = () => {\n  const [appointment, setAppointment] = useState({ date: \"\", time: \"\" });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [newDate, setNewDate] = useState(\"\");\n  const [newTime, setNewTime] = useState(\"\");\n\n  useEffect(() => {\n    const fetchAppointment = async () => {\n      try {\n        const usrId = localStorage.getItem(\"uid\");\n        if (!usrId) {\n          setError(\"User ID not found in local storage\");\n          setLoading(false);\n          return;\n        }\n\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          setError(\"Token not found in local storage\");\n          setLoading(false);\n          return;\n        }\n\n        const config = {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        };\n\n        const response = await axios.get(\n          `http://localhost:8080/api/appointment/details/${usrId}`,\n          config\n        );\n\n        if (!response.data) {\n          console.error(\n            \"Invalid appointment data: Empty response\",\n            response.data\n          );\n          setError(\"Invalid appointment data: Empty response\");\n          setLoading(false);\n          return;\n        }\n\n        if (\n          !response.data.date ||\n          !response.data.time ||\n          !response.data.status\n        ) {\n          console.error(\"Invalid appointment data\", response.data);\n          setError(\"Invalid appointment data\");\n          setLoading(false);\n          return;\n        }\n\n        const { date, time, status, statusMessage } = response.data;\n        console.log(response.data);\n        setAppointment({ date, time, status, statusMessage });\n        setLoading(false);\n\n        localStorage.setItem(\"tId\", response.data.id);\n      } catch (error) {\n        console.error(\"Error fetching appointment details\", error);\n        setError(\"Error fetching appointment details\");\n        setLoading(false);\n      }\n    };\n\n    fetchAppointment();\n  }, []);\n\n  const handleDateChange = (e) => {\n    setNewDate(e.target.value);\n  };\n\n  const handleTimeChange = (e) => {\n    setNewTime(e.target.value);\n  };\n\n  const handleSave = async () => {\n    try {\n      const appointmentId = localStorage.getItem(\"appointmentId\");\n      const token = localStorage.getItem(\"token\");\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      };\n\n      await axios.put(\n        `http://localhost:8080/api/appointment/update/${appointmentId}`,\n        { date: newDate, time: newTime },\n        config\n      );\n\n      window.location.href = \"/profile\";\n    } catch (error) {\n      console.error(\"Error updating appointment:\", error);\n      alert(\"Error updating appointment. Please try again.\");\n    }\n  };\n\n  return (\n    <div>\n      <Navbar />\n      <UserProfileView />\n      <div className=\"appcontainer\">\n        <h2>Edit Appointment</h2>\n\n        {loading ? (\n          <p>Loading...</p>\n        ) : error ? (\n          <p>{error}</p>\n        ) : (\n          <div>\n            <div>\n              <label>Date:</label>\n              <input type=\"date\" value={newDate} onChange={handleDateChange} />\n            </div>\n            <div>\n              <label>Time:</label>\n              <input\n                type=\"string\"\n                value={newTime}\n                onChange={handleTimeChange}\n              />\n            </div>\n            <div>\n              <button className=\"editbutton\" onClick={handleSave}>\n                Save Changes\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default EditAppointment;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}